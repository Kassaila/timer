/**Developed by Dmytro Symonov
 * {s} symonov.com
 * 2019
 */
function timer(e){const t=document.getElementById(e.idTimer);let d={sec:t.querySelector(".seconds"),min:t.querySelector(".minutes"),hour:t.querySelector(".hours"),day:t.querySelector(".days"),msg:t.querySelector(".message")};for(let a in d)void 0!==e.spanClass&&void 0!==e.spanClass[a]&&"string"==typeof e.spanClass[a]&&""!==e.spanClass[a]&&(d[a]=t.querySelector("."+e.spanClass[a]));let a=()=>new Date,n=()=>a().getTime(),i=()=>Math.floor((v()-n())/1e3),o=()=>i()%60,r=()=>(i()-o())/60%60,s=()=>((i()-o())/60-r())/60%24;e.deadLine.startDate=void 0!==e.deadLine.startDate&&!0===Array.isArray(e.deadLine.startDate)?e.deadLine.startDate:void 0,e.deadLine.endDate=void 0!==e.deadLine.endDate&&!0===Array.isArray(e.deadLine.endDate)?e.deadLine.endDate:void 0;const L={turnLoop:void 0!==e.deadLine.turnLoop&&"boolean"==typeof e.deadLine.turnLoop&&e.deadLine.turnLoop,loopDays:void 0!==e.deadLine.loopDays&&"number"==typeof e.deadLine.loopDays&&e.deadLine.loopDays>0?e.deadLine.loopDays:1,pauseDays:void 0!==e.deadLine.pauseDays&&"number"==typeof e.deadLine.pauseDays&&e.deadLine.pauseDays>0?e.deadLine.pauseDays:0,timeZone:void 0!==e.deadLine.timeZone&&"number"==typeof e.deadLine.timeZone&&e.deadLine.timeZone>=-12&&e.deadLine.timeZone<=14?e.deadLine.timeZone:-1*a().getTimezoneOffset()/60,startMin:void 0!==e.deadLine.startTime&&void 0!==e.deadLine.startTime[1]&&"number"==typeof e.deadLine.startTime[1]&&e.deadLine.startTime[1]>=0&&e.deadLine.startTime[1]<60?e.deadLine.startTime[1]:0,startHour:void 0!==e.deadLine.startTime&&void 0!==e.deadLine.startTime[0]&&"number"==typeof e.deadLine.startTime[0]&&e.deadLine.startTime[0]>=0&&e.deadLine.startTime[0]<=24?e.deadLine.startTime[0]:0,startDay:void 0!==e.deadLine.startDate&&void 0!==e.deadLine.startDate[0]&&"number"==typeof e.deadLine.startDate[0]&&e.deadLine.startDate[0]>0&&e.deadLine.startDate[0]<=31?e.deadLine.startDate[0]:a().getDate(),startMonth:void 0!==e.deadLine.startDate&&void 0!==e.deadLine.startDate[1]&&"number"==typeof e.deadLine.startDate[1]&&e.deadLine.startDate[1]>0&&e.deadLine.startDate[1]<=12?e.deadLine.startDate[1]-1:a().getMonth(),startYear:void 0!==e.deadLine.startDate&&void 0!==e.deadLine.startDate[2]&&"number"==typeof e.deadLine.startDate[2]&&e.deadLine.startDate[2]>=0?e.deadLine.startDate[2]:a().getFullYear(),endMin:void 0!==e.deadLine.endTime&&void 0!==e.deadLine.endTime[1]&&"number"==typeof e.deadLine.endTime[1]&&e.deadLine.endTime[1]>=0&&e.deadLine.endTime[1]<60?e.deadLine.endTime[1]:0,endHour:void 0!==e.deadLine.endTime&&void 0!==e.deadLine.endTime[0]&&"number"==typeof e.deadLine.endTime[0]&&e.deadLine.endTime[0]>=0&&e.deadLine.endTime[0]<=24?e.deadLine.endTime[0]:0,endDay:void 0!==e.deadLine.endDate&&void 0!==e.deadLine.endDate[0]&&"number"==typeof e.deadLine.endDate[0]&&e.deadLine.endDate[0]>0&&e.deadLine.endDate[0]<=31?e.deadLine.endDate[0]:a().getDate(),endMonth:void 0!==e.deadLine.endDate&&void 0!==e.deadLine.endDate[1]&&"number"==typeof e.deadLine.endDate[1]&&e.deadLine.endDate[1]>0&&e.deadLine.endDate[1]<=12?e.deadLine.endDate[1]-1:a().getMonth(),endYear:void 0!==e.deadLine.endDate&&void 0!==e.deadLine.endDate[2]&&"number"==typeof e.deadLine.endDate[2]&&e.deadLine.endDate[2]>=0?e.deadLine.endDate[2]:a().getFullYear()};let m={msgOutput:!1,toStartMsg:"",toEndMsg:"",errMsg:""};for(let t in m)void 0!==e.textMsg&&void 0!==e.textMsg[t]&&(m[t]=e.textMsg[t]);let u=e=>{!0===m.msgOutput&&(d.msg.innerHTML=e)};const D=new Date(L.startYear,L.startMonth,L.startDay,L.startHour,L.startMin),y=new Date(L.endYear,L.endMonth,L.endDay,L.endHour,L.endMin),T=36e5*(L.timeZone+a().getTimezoneOffset()/60),p=36e5*(L.startHour>L.endHour?L.startHour-L.endHour:24-(L.endHour-L.startHour))+6e4*L.startMin-6e4*L.endMin;let l,g,v=()=>{if(D.getTime()-T>n())return D.getTime()-T;if(D.getTime()-T<=n()&&!0===L.turnLoop){let e;for(e=D.getTime()-T;e<n();e+=864e5*(L.loopDays+L.pauseDays));return g=e,(l=e-864e5*L.pauseDays-p)-n()<=0?g:l}return y.getTime()-T>n()&&!1===L.turnLoop?y.getTime()-T:n()},M=()=>{d.sec.innerHTML=o()>9?o():"0"+o(),0!==M.count&&0!==o()||setTimeout(()=>d.min.innerHTML=r()>9?r():"0"+r(),M.count),(0===M.count||0===o()&&0===r())&&setTimeout(()=>d.hour.innerHTML=s()>9?s():"0"+s(),M.count),(0===M.count||0===o()&&0===r()&&0===s())&&setTimeout(()=>d.day.innerHTML=(()=>Math.floor(((i()-o())/60-r())/60/24))(),M.count),(0===M.count||i()<=0)&&(M.count=1e3,D.getTime()-T>n()?u(m.toStartMsg):D.getTime()-T<=n()&&!0===L.turnLoop?Math.floor((l-n())/1e3)<=0?(u(m.errMsg),e.timerCallback()):u(m.toEndMsg):y.getTime()-T>n()&&!1===L.turnLoop?u(m.toEndMsg):(u(m.errMsg),e.timerCallback()))};M.count=0,M();let f=setInterval(()=>{y.getTime()-T<=n()&&!1===L.turnLoop&&clearInterval(f),M()},1e3)}